<!DOCTYPE html>
<html>
<head>
	<link rel="shortcut icon" href="bombicon.ico">
	
	<link rel="stylesheet" type="text/css" href="http://76.255.179.114/gekystyle.css"/>
	
	<script src="/socket.io/socket.io.js"></script>
	
	
	<script type="text/javascript" src="bmcollider.js"></script>
	
	<script>	
		var socket;
		var canvas;
		var context;
		
		var pixelsize = 2;
		var tilesize = 16;
		var tilepixelsize = pixelsize*tilesize;
		
		var starttime;
		var lasttime;
		var avgfps = 0;
		var fps1,fps2;
		
		var tilecache;
		var playercache;
	
		var playersto;
		var players;
		var map;
		
		var me = {
			posx:1.5,
			posy:1.5,
			dir:0,      //[up|down|left|right]
			pdir:0,
			adir:0,
			bomb:false,
		}
		var synch = {
			num : -1,
		}
		
		function init() {
			fps1 = document.getElementById("fps1");
			fps2 = document.getElementById("fps2");
			
			tileinit();
			controlinit();
			socketinit();
			renderinit();	

			tick();
		}
		
		function tileinit() {
			tilecache = createCache([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,3,3,3,3,3,3,3,3,3,3,3,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,5,5,5,5,5,5,5,5,5,5,3,2,2,0,0,4,4,4,4,4,4,4,4,4,4,4,3,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,2,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,3,2,2,2,2,2,2,2,2,2,2,2,2,2,6,3,5,5,5,5,5,5,5,5,5,5,5,5,3,2,6,4,5,5,5,5,5,5,5,5,5,5,5,5,5,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,2,2,2,2,2,6,7,3,2,2,2,2,2,2,2,2,5,5,5,3,2,6,3,5,5,5,5,5,5,5,5,5,5,5,5,5,2,6,4,5,5,5,5,5,5,5,5,5,4,4,4,4,2,6,4,4,4,4,4,4,4,4,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,2,2,2,2,2,2,2,2,2,2,6,7,3,2,2,2,5,5,5,5,5,5,5,5,3,2,6,3,5,5,5,5,5,5,5,5,5,5,5,5,5,2,6,4,5,5,5,5,4,4,4,4,4,4,4,4,4,2,6,4,4,4,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,-1,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,-1,-1,-1,-1,-1,-1,-1,9,9,9,9,9,9,-1,9,8,8,-1,-1,-1,-1,9,9,10,10,10,10,11,11,9,11,9,-1,-1,-1,-1,9,10,12,8,12,10,13,8,9,11,9,9,-1,-1,-1,-1,9,12,12,12,12,12,13,8,9,9,11,9,-1,-1,-1,9,12,8,8,12,12,12,13,11,11,11,11,13,9,-1,-1,9,12,8,8,12,12,12,12,13,11,11,13,13,9,-1,-1,9,12,12,12,12,12,12,12,10,13,13,13,13,9,-1,-1,9,12,12,12,12,12,12,12,10,10,13,13,13,9,-1,-1,9,12,12,12,12,12,12,10,10,10,13,13,13,9,-1,-1,9,10,12,12,12,12,10,10,10,13,13,13,13,9,-1,-1,-1,9,10,10,10,10,10,10,10,13,13,13,9,-1,-1,-1,-1,9,13,10,10,10,10,13,13,13,13,13,9,-1,-1,-1,-1,-1,9,9,13,13,13,13,13,13,9,9,-1,-1,-1,-1,-1,-1,-1,-1,9,9,9,9,9,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],
									["#383838","#C0C0C0","#989898","#707070","#585858","#606060","#202020","#484848","#F8F8F8","#400000","#E03808","#88A090","#F87818","#780800"]);
			
			playercache = createCache([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,2,2,0,1,1,1,1,1,1,1,1,1,1,0,-1,-1,2,0,1,1,1,1,1,4,4,1,1,1,1,1,0,-1,2,0,1,1,1,1,4,4,3,4,1,1,1,1,0,-1,2,0,0,1,1,0,4,4,4,4,1,1,1,1,0,-1,2,2,0,1,1,0,0,4,4,0,1,1,1,0,2,-1,-1,2,0,0,1,1,0,0,0,1,1,1,1,0,-1,-1,-1,2,2,0,0,1,1,1,1,1,1,1,0,2,-1,-1,-1,-1,2,2,2,0,0,1,1,1,0,2,2,-1,-1,-1,-1,2,5,6,2,2,2,2,2,2,2,7,5,2,-1,-1,-1,5,5,6,7,7,7,8,8,3,8,7,5,5,-1,-1,-1,4,4,6,7,7,8,8,8,8,8,6,4,4,-1,-1,-1,4,4,7,6,6,6,6,6,6,6,7,4,4,-1,-1,-1,-1,-1,5,7,7,7,8,8,8,7,5,-1,-1,-1,-1,-1,-1,-1,5,5,7,7,7,7,7,5,5,-1,-1,-1,-1,-1,-1,6,5,5,5,6,6,6,5,5,5,6,-1,-1,-1,-1,6,6,5,5,5,6,6,6,5,5,5,6,6,-1,-1,-1,6,6,4,4,4,6,6,6,4,4,4,6,6,-1,-1,-1,6,6,4,4,4,6,6,6,4,4,4,6,6,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,4,4,0,-1,-1,2,0,1,1,1,1,1,1,1,1,4,4,3,4,0,-1,2,0,1,1,1,1,1,1,1,0,4,4,4,4,0,-1,2,0,1,1,1,1,1,1,1,0,0,4,4,0,0,-1,2,2,0,1,1,1,1,1,1,1,0,0,0,0,2,-1,2,2,0,1,1,1,1,1,1,1,1,1,1,0,-1,-1,-1,2,2,0,0,1,1,1,1,1,1,1,0,2,-1,-1,-1,5,2,2,2,0,0,1,1,1,0,0,2,-1,-1,-1,-1,5,5,6,6,2,2,2,2,2,2,5,5,2,-1,-1,-1,2,5,6,7,7,7,8,8,3,8,5,5,5,-1,-1,-1,-1,2,6,7,7,8,8,8,8,8,4,3,4,-1,-1,-1,-1,-1,7,6,6,6,6,6,6,6,4,4,4,-1,-1,-1,-1,-1,5,7,7,7,8,8,8,7,4,4,4,-1,-1,-1,-1,6,5,5,7,7,7,8,7,5,2,-1,-1,-1,-1,-1,6,6,5,5,5,6,6,6,4,4,4,6,-1,-1,-1,6,6,6,5,5,5,6,6,6,6,6,6,6,-1,-1,-1,6,6,6,5,5,5,6,6,6,6,6,6,6,-1,-1,-1,6,6,6,4,4,4,6,6,6,6,6,6,-1,-1,-1,-1,-1,6,6,4,4,4,6,6,6,6,6,-1,-1,-1,-1,-1,-1,6,6,4,4,4,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,-1,2,4,4,1,1,1,1,1,1,1,1,1,0,-1,-1,2,4,4,3,4,1,1,1,1,1,1,1,1,1,0,-1,2,4,4,4,4,1,1,1,1,1,1,1,1,1,0,-1,2,0,4,4,0,1,1,1,1,1,1,1,1,1,0,-1,2,2,0,0,0,1,1,1,1,1,1,1,1,0,2,-1,2,2,0,0,1,1,1,1,1,1,1,1,1,0,-1,-1,-1,2,2,0,0,1,1,1,1,1,1,1,0,2,-1,-1,-1,-1,2,2,2,0,0,1,1,1,0,0,2,5,-1,-1,-1,2,5,5,6,2,2,2,2,2,2,7,5,5,-1,-1,-1,5,5,5,7,7,7,8,8,3,8,7,5,2,-1,-1,-1,4,3,4,7,7,8,8,8,8,8,6,2,-1,-1,-1,-1,4,4,4,6,6,6,6,6,6,6,7,-1,-1,-1,-1,-1,4,4,4,7,7,7,8,8,8,7,5,-1,-1,-1,-1,-1,-1,6,2,5,7,7,7,8,7,5,5,-1,-1,-1,-1,-1,6,6,4,4,4,6,6,6,5,5,5,6,-1,-1,-1,-1,6,6,6,6,6,6,6,6,5,5,5,6,6,-1,-1,-1,6,6,6,6,6,6,6,6,5,5,5,6,6,-1,-1,-1,-1,6,6,6,6,6,6,6,4,4,4,6,6,-1,-1,-1,-1,-1,6,6,6,6,6,6,4,4,4,6,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,4,4,4,6,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,2,2,1,1,1,1,1,1,1,1,1,1,1,0,0,-1,2,0,1,1,1,1,1,1,1,1,1,1,1,1,0,-1,2,0,1,9,9,9,9,9,9,9,9,9,1,1,0,-1,2,0,9,10,10,6,10,10,10,6,10,10,9,1,0,-1,2,0,9,10,10,6,10,10,10,6,10,10,9,1,2,-1,-1,2,9,10,10,6,10,10,10,6,10,10,9,0,-1,-1,-1,2,9,10,10,6,10,10,10,6,10,10,9,2,-1,-1,-1,-1,2,9,9,9,9,9,9,9,9,9,2,-1,-1,-1,-1,2,5,6,2,2,2,2,2,2,2,6,5,2,-1,-1,-1,5,5,6,7,7,8,8,8,3,8,7,5,5,-1,-1,-1,4,4,6,7,8,8,8,8,8,8,6,4,4,-1,-1,-1,4,4,7,6,6,10,10,10,6,6,7,4,4,-1,-1,-1,-1,-1,5,7,7,8,8,8,8,7,5,-1,-1,-1,-1,-1,-1,6,5,5,7,7,8,8,7,5,5,6,-1,-1,-1,-1,6,6,5,5,5,6,6,6,5,5,5,6,6,-1,-1,-1,6,6,4,4,4,6,6,6,4,4,4,6,6,-1,-1,-1,6,6,4,4,3,6,6,6,4,4,3,6,6,-1,-1,-1,6,6,4,4,4,6,6,6,4,4,4,6,6,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,4,4,2,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,4,2,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,1,1,0,-1,-1,2,0,1,1,1,1,1,1,1,1,1,1,1,1,0,-1,2,0,1,1,1,9,9,9,9,9,9,9,9,1,0,-1,2,0,0,1,9,10,10,6,10,10,10,6,10,9,0,-1,2,0,0,1,9,10,10,6,10,10,10,6,10,9,0,-1,2,2,0,0,9,10,10,6,10,10,10,6,10,9,2,-1,-1,2,2,0,9,10,10,6,10,10,10,6,10,9,2,-1,-1,-1,2,2,2,9,9,9,9,9,9,9,9,2,-1,-1,-1,2,5,6,6,2,2,2,2,4,3,4,5,5,-1,-1,-1,5,5,6,7,7,8,8,7,4,4,4,5,2,-1,-1,-1,4,4,6,7,8,8,8,7,4,4,4,2,-1,-1,-1,-1,-1,-1,5,6,6,10,10,10,6,6,2,-1,-1,-1,-1,-1,-1,6,5,5,7,8,8,8,7,5,2,6,-1,-1,-1,-1,6,6,5,5,5,7,8,7,5,5,4,6,6,-1,-1,6,6,6,5,5,5,6,6,6,4,4,4,6,6,-1,-1,6,6,6,4,4,4,6,6,6,6,4,6,6,-1,-1,-1,6,6,4,4,3,4,6,6,6,6,6,6,6,-1,-1,-1,6,6,4,4,4,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,3,4,-1,-1,-1,-1,-1,2,0,1,1,1,1,0,4,4,4,4,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,0,4,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,-1,0,1,1,1,1,1,1,1,1,1,1,1,1,-1,-1,2,0,1,1,1,1,1,1,1,1,1,1,1,1,0,-1,2,0,9,9,9,9,9,9,9,9,1,1,1,1,0,-1,2,9,10,6,10,10,10,6,10,10,9,1,1,1,0,-1,2,9,10,6,10,10,10,6,10,10,9,1,1,1,0,-1,2,9,10,6,10,10,10,6,10,10,9,1,1,0,2,-1,2,9,10,6,10,10,10,6,10,10,9,1,0,2,-1,-1,-1,2,9,9,9,9,9,9,9,9,2,2,2,-1,-1,-1,-1,5,5,4,3,4,2,2,2,2,7,7,5,2,-1,-1,-1,2,5,4,4,4,7,7,8,3,8,7,5,5,-1,-1,-1,-1,2,4,4,4,7,7,8,8,8,6,4,4,-1,-1,-1,-1,-1,2,6,6,10,10,10,6,6,5,-1,-1,-1,-1,-1,-1,6,2,5,7,7,8,8,7,5,5,-1,-1,-1,-1,-1,6,6,4,5,5,7,7,7,5,5,5,6,-1,-1,-1,-1,6,6,4,4,4,6,6,6,5,5,5,6,6,-1,-1,-1,6,6,6,4,6,6,6,6,4,4,4,6,6,-1,-1,-1,6,6,6,6,6,6,6,6,4,4,3,4,6,-1,-1,-1,-1,6,6,6,6,6,6,6,6,4,4,4,6,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,3,4,-1,-1,-1,2,0,0,1,1,1,1,0,-1,4,4,4,4,-1,2,0,1,1,1,1,1,1,1,1,1,0,4,4,-1,2,0,1,1,1,1,1,1,1,1,3,1,1,0,-1,-1,2,0,1,1,1,1,1,1,1,1,1,1,1,0,-1,-1,9,9,0,1,1,1,1,1,1,1,1,1,1,1,0,-1,-1,10,9,9,0,1,1,1,1,1,1,1,1,1,0,-1,-1,10,6,10,9,1,1,1,1,1,1,1,1,1,0,-1,-1,10,6,10,9,1,1,1,1,1,1,1,1,0,2,-1,9,10,6,10,9,1,1,1,1,1,1,1,1,0,-1,-1,-1,9,6,10,9,1,1,1,1,1,1,1,0,2,-1,-1,-1,2,9,9,0,0,1,1,1,1,0,2,2,-1,-1,-1,-1,-1,2,2,2,2,2,2,2,2,7,7,-1,-1,-1,-1,-1,-1,-1,7,8,7,5,5,5,7,3,8,-1,-1,-1,-1,-1,-1,-1,10,8,7,5,5,5,8,8,6,-1,-1,-1,-1,-1,-1,-1,7,6,6,4,3,4,6,6,7,-1,-1,-1,-1,-1,-1,-1,6,7,7,4,4,4,8,7,-1,-1,-1,-1,-1,-1,-1,6,6,4,7,4,4,4,7,6,6,-1,-1,-1,-1,-1,6,6,6,4,4,5,5,5,4,6,6,6,-1,-1,-1,-1,6,6,6,6,6,5,5,5,6,6,6,6,-1,-1,-1,-1,6,6,6,4,4,4,4,4,4,6,6,6,-1,-1,-1,-1,6,6,6,4,4,4,4,3,4,6,6,6,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,0,0,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,9,0,0,1,1,1,1,1,1,1,1,1,1,4,4,-1,9,0,1,1,1,1,1,1,1,1,1,1,4,4,3,4,9,0,1,1,1,1,1,1,1,1,1,1,4,4,4,4,9,9,1,1,1,1,1,1,1,1,1,1,1,4,4,-1,-1,9,0,1,1,1,1,1,1,1,1,1,1,0,2,-1,-1,9,0,1,1,1,1,1,1,1,1,1,1,0,-1,-1,-1,9,0,1,1,1,1,1,1,1,1,1,0,2,-1,-1,4,4,2,0,1,1,1,1,1,1,0,0,2,-1,-1,-1,4,4,2,7,2,2,2,2,2,2,2,7,-1,-1,-1,-1,4,4,2,7,8,7,2,5,5,7,7,8,-1,-1,-1,-1,-1,-1,-1,10,8,7,7,2,5,5,8,8,-1,-1,-1,-1,-1,-1,6,7,6,6,6,6,5,4,3,4,2,-1,-1,-1,-1,6,6,6,7,5,5,7,2,4,4,4,5,2,-1,-1,6,4,4,2,5,5,5,7,7,4,4,4,5,4,6,-1,6,4,3,4,5,5,2,6,6,6,6,5,4,4,6,-1,6,6,4,4,4,5,6,6,6,6,4,4,4,6,6,-1,6,6,6,4,4,4,6,6,6,6,6,6,6,6,-1,-1,-1,6,6,6,4,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,-1,-1,-1,-1,-1,-1,2,0,0,1,1,1,0,4,4,3,4,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,0,4,4,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,9,2,0,1,1,1,1,1,1,1,1,1,1,0,-1,-1,-1,9,9,0,1,1,1,1,1,1,1,1,1,1,0,-1,-1,6,10,9,9,9,9,1,1,1,1,1,1,1,0,-1,-1,6,10,10,6,10,10,9,1,1,1,1,1,1,0,-1,-1,6,10,10,6,10,10,9,1,1,1,1,1,0,2,-1,9,6,10,10,6,10,10,9,1,1,1,1,1,0,-1,-1,2,9,9,10,6,10,10,9,1,1,1,1,0,2,-1,-1,-1,2,2,9,9,9,9,1,1,1,0,2,2,-1,-1,-1,-1,-1,4,3,4,2,2,2,2,2,7,7,4,-1,-1,-1,-1,-1,4,4,4,5,5,5,7,8,3,8,4,-1,-1,-1,-1,-1,4,4,4,5,5,7,7,8,8,6,-1,-1,-1,-1,-1,-1,-1,7,10,6,6,6,6,6,6,7,-1,-1,-1,-1,-1,6,6,5,7,7,7,8,5,5,7,6,-1,-1,-1,-1,4,4,5,5,2,7,7,2,5,5,5,4,6,-1,-1,-1,4,4,4,2,2,6,6,6,2,5,5,4,4,6,-1,-1,6,4,4,4,6,6,6,6,6,2,4,4,3,6,-1,-1,6,6,4,6,6,6,6,6,6,6,4,4,4,6,-1,-1,6,6,6,6,6,6,6,6,6,4,4,4,4,6,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,4,4,-1,2,0,0,1,1,1,1,0,-1,-1,-1,-1,4,4,2,0,1,1,1,1,1,1,1,1,1,0,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,1,0,-1,-1,2,1,1,1,1,1,1,1,1,1,1,1,1,0,-1,2,0,1,1,1,1,1,1,1,1,1,1,1,9,9,-1,2,0,1,1,1,1,1,1,1,1,1,9,9,10,-1,-1,2,0,1,1,1,1,1,1,1,1,9,10,6,10,-1,-1,2,0,0,1,1,1,1,1,1,1,9,10,6,10,-1,-1,-1,2,0,1,1,1,1,1,1,1,9,10,6,10,9,-1,-1,2,0,0,1,1,1,1,1,1,9,10,6,9,-1,-1,-1,-1,2,0,0,0,1,1,1,1,0,9,9,2,-1,-1,-1,-1,-1,7,2,2,2,2,2,2,2,2,2,-1,-1,-1,-1,-1,-1,7,8,7,5,5,5,7,3,7,-1,-1,-1,-1,-1,-1,-1,6,8,7,5,5,5,8,8,10,-1,-1,-1,-1,-1,-1,-1,7,6,6,4,3,4,6,6,7,-1,-1,-1,-1,-1,-1,-1,6,7,7,4,4,4,8,7,-1,-1,-1,-1,-1,-1,-1,6,6,6,7,4,4,4,7,4,6,-1,-1,-1,-1,-1,6,6,6,6,4,5,5,5,4,4,6,6,-1,-1,-1,-1,6,6,6,6,6,5,5,5,6,6,6,6,-1,-1,-1,-1,6,6,6,6,4,4,4,4,3,4,6,6,-1,-1,-1,-1,6,6,6,6,4,4,4,4,4,4,6,6,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,4,3,4,2,0,0,1,1,1,0,-1,-1,-1,-1,-1,4,4,2,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,1,1,0,9,-1,2,0,1,1,1,1,1,1,1,1,1,0,9,9,-1,-1,2,0,1,1,1,1,1,1,9,9,9,9,10,6,-1,-1,2,0,1,1,1,1,1,9,10,10,6,10,10,6,-1,-1,2,0,1,1,1,1,1,9,10,10,6,10,10,6,-1,-1,-1,0,0,1,1,1,1,9,10,10,6,10,10,6,9,-1,-1,2,0,0,0,1,1,9,10,10,6,10,9,9,-1,-1,-1,-1,2,2,0,0,0,2,9,9,9,9,2,2,-1,-1,-1,-1,4,6,6,2,2,2,2,2,4,3,4,-1,-1,-1,-1,-1,4,7,7,8,7,5,5,5,4,4,4,-1,-1,-1,-1,-1,-1,6,7,8,7,7,5,5,4,4,4,-1,-1,-1,-1,-1,-1,7,6,6,6,6,6,6,6,7,-1,-1,-1,-1,-1,-1,-1,6,7,7,5,5,8,7,7,5,6,-1,-1,-1,-1,-1,6,6,4,5,5,5,2,7,2,5,5,4,4,-1,-1,6,6,4,4,5,5,2,6,6,2,2,4,4,4,-1,-1,6,6,4,4,4,2,6,6,6,6,4,4,4,6,-1,-1,6,6,4,4,3,6,6,6,6,6,6,4,6,6,6,-1,6,6,4,4,4,4,6,6,6,6,6,6,6,6,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,0,0,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,2,0,1,1,1,1,1,1,1,3,1,1,0,-1,-1,4,4,1,1,1,1,1,1,1,1,1,1,1,0,9,4,4,3,4,1,1,1,1,1,1,1,1,1,1,1,9,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,9,-1,4,4,1,1,1,1,1,1,1,1,1,1,1,9,9,-1,2,0,1,1,1,1,1,1,1,1,1,1,1,9,-1,-1,2,0,1,1,1,1,1,1,1,1,1,1,1,9,-1,-1,-1,2,0,1,1,1,1,1,1,1,1,1,0,9,-1,-1,-1,-1,2,2,0,0,1,1,1,1,0,0,2,4,4,-1,-1,-1,-1,6,2,2,2,2,2,2,2,7,2,4,4,-1,-1,-1,-1,7,6,7,5,5,7,3,8,7,2,4,4,-1,-1,-1,-1,7,7,5,5,7,8,8,7,10,-1,-1,-1,-1,-1,6,2,4,3,4,5,6,6,6,6,7,6,-1,-1,-1,6,2,5,4,4,4,2,7,5,5,7,6,6,6,-1,6,6,4,5,4,4,4,7,2,5,5,5,2,4,4,6,6,6,4,4,5,6,6,6,6,2,5,5,4,3,4,6,6,6,6,4,4,4,6,6,6,6,5,4,4,4,6,6,-1,6,6,6,6,6,6,6,6,6,4,4,4,6,6,6,-1,6,6,6,6,6,6,6,6,6,6,4,6,6,6,-1,-1,-1,6,6,6,6,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,6,6,6,6,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,6,6,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],
									  ["#B0B0B0","#E0E0E0","#606060","#F8F8F8","#C84088","#C8C8C8","#000000","#0000B8","#0070F8","#E04088","#F8B890"]);
		}
		
		function createCache(tiles,pallet) {
			var canvas = document.createElement("canvas");
			canvas.width = tilepixelsize;
			canvas.height = pixelsize*tiles.length/tilesize;
			var context = canvas.getContext("2d");
			
			for (var t=0; t<tiles.length; t++) {
				var tcolor = tiles[t];
				if (tcolor < 0) continue;
				
				context.fillStyle=pallet[tcolor];
				
				context.fillRect((t%tilesize)*pixelsize,(~~(t/tilesize))*pixelsize,pixelsize,pixelsize);
			}
			
			return canvas;			
		}
		
		function controlinit() {
			document.onkeydown = function(event) {
				switch (event.keyCode) {
					case 38 : if (!(me.dir & 0x8)) {me.dir |= 0x8; me.pdir = 0x8;} break;
					case 40 : if (!(me.dir & 0x4)) {me.dir |= 0x4; me.pdir = 0x4;} break;
					case 37 : if (!(me.dir & 0x2)) {me.dir |= 0x2; me.pdir = 0x2;} break;
					case 39 : if (!(me.dir & 0x1)) {me.dir |= 0x1; me.pdir = 0x1;} break;
				}
			}

			document.onkeyup = function(event) {
				switch (event.keyCode) {
					case 38 : if (me.dir & 0x8) me.dir &= ~0x8; break;
					case 40 : if (me.dir & 0x4) me.dir &= ~0x4; break;
					case 37 : if (me.dir & 0x2) me.dir &= ~0x2; break;
					case 39 : if (me.dir & 0x1) me.dir &= ~0x1; break;
				}
			}
		}
		
		function socketinit() {
			if (!window.io) {
				if (window.location.port != "8080") {
					window.location.href = "http://76.255.179.114:8080/bomberman"
				} else {
					window.alert("failed to initialize socket.io");
				}	
			}
			
			socket = io.connect("76.255.179.114:8080");
			socket.on("init",function(data) {
				synch.num = data.num;
				map = data.map;
				map.width = data.width;
				map.height = data.height;
				canvas.width = map.width * tilepixelsize;
				canvas.height = map.height * tilepixelsize;
				starttime = new Date().getTime() - data.tick;
				lasttime = data.tick;
			});
			
			socket.on("tick",function(data) {
				if (!players || players.length != data.players.length)
					players = data.players;
				playersto = data.players;
				update();
			});
		}
		
		function renderinit() {
			canvas = document.getElementById("bmcanvas");
			if (canvas.getContext) {
				context = canvas.getContext("2d");
			} else {
				window.alert("failed to initialize canvas element");
			}
		}
		
		function tick() {
			requestAnimFrame(tick);
			var time = new Date().getTime() - starttime;
			var dt = (time - lasttime)/1000;
		
			collider.step(me,dt);
			for (var t=0; t<players.length; t++) {
				collider.stepothers(players[t],playersto[t],dt);
			}
			
			render(time);
			
			var fps = dt>0?1/dt:dt;
			avgfps = 0.99 * avgfps + 0.01 * fps;
			
			fps1.innerHTML = ~~avgfps + "fps";
			fps2.innerHTML = ~~fps + "fps";
			lasttime = time;
		}
		
		function update() {			
			socket.emit("input",me);
		}
		
		function render(time) {
			context.clearRect(0,0,canvas.width,canvas.height);
			context.fillStyle = "#105830";
			context.fillRect(0,0,canvas.width,canvas.height);
			
			for (var x=0; x<map.width; x++) {
				for (var y=0; y<map.height; y++) {
					renderTile(x*tilesize,y*tilesize,map[x+(y*map.width)],tilecache);
				}
			}
			
			for (var t=0; t<players.length; t++) {
				renderPlayer(players[t],time);
			}
			
			//for (var t=0; t<playersto.length; t++) {
			//	renderPlayer(playersto[t],time);
			//}
			
			renderPlayer(me,time);
		}
		
		function renderTile(x,y,tile,cache) {		
			context.drawImage(cache,0,tile*tilepixelsize,tilepixelsize,tilepixelsize,x*pixelsize,y*pixelsize,tilepixelsize,tilepixelsize);
		}
		
		function renderPlayer(p,time) {
			var anim = p.adir & 0x8 ? [1,0,2,0] :
					   p.adir & 0x4 ? [4,3,5,3] :
					   p.adir & 0x2 ? [7,6,8,6] :
					   p.adir & 0x1 ? [10,9,11,9]
					   : p.pdir & 0x8 ? [0] :
					     p.pdir & 0x4 ? [3] :
						 p.pdir & 0x2 ? [6] :
						 p.pdir & 0x1 ? [9]
						 : [3];

			var tile = anim[0];
		
			renderTile((p.posx-0.5)*tilesize,(p.posy-1.5)*tilesize,tile*2  ,playercache);
			renderTile((p.posx-0.5)*tilesize,(p.posy-0.5)*tilesize,tile*2+1,playercache);
		}
		
		
		window.requestAnimFrame = (function() {
			return window.requestAnimationFrame      ||
				   window.webkitRequestAnimationFrame||
				   window.mozRequestAnimationFrame   ||
				   window.oRequestAnimationFrame     ||
				   window.msRequestAnimationFrame    ||
				   function(callback,element) {
						window.setTimeout(callback, 1000/60);
				   };
		})();
		
	</script>
	
	<script type="text/javascript" src="http://76.255.179.114/googlestuff.js"></script>
	
</head>
<body onload="init();">
	<canvas id="bmcanvas" width="0px" height="0px" style="text-align:middle"><h1>loading...</h1></canvas>
	<p id="fps1"></p>
	<p id="fps2"></p>
	<p id="debug"></p>
</body>
</html>